class e{width=1768;x=0;y=0;constructor(e,t,i){this.game=e,this.image=t,this.speedModifier=i,this.height=this.game.height}update(){this.x<=-this.width?this.x=0:this.x-=this.game.speed*this.speedModifier}draw(){this.game.ctx.drawImage(this.image,this.x,this.y),this.game.ctx.drawImage(this.image,this.x+this.width,this.y)}}class t{layers=[];topLayers=[];constructor(t){this.game=t;const i=document.getElementById("layer1"),s=document.getElementById("layer2"),h=document.getElementById("layer3"),a=document.getElementById("layer4");this.layers=[new e(this.game,i,.2),new e(this.game,s,.4),new e(this.game,h,1)],this.topLayers=[new e(this.game,a,1.5)]}update(){this.layers.forEach((e=>e.update()))}postUpdate(){this.topLayers.forEach((e=>e.update()))}draw(){this.layers.forEach((e=>e.draw()))}postDraw(){this.topLayers.forEach((e=>e.draw()))}}class i{controlKeys=["ArrowUp","ArrowDown"];shootKey=" ";constructor(e){this.game=e,window.addEventListener("keydown",(e=>{this.controlKeys.includes(e.key)&&!this.game.keys.includes(e.key)&&this.game.keys.push(e.key),this.shootKey===e.key&&this.game.player.shoot(),"d"===e.key&&(this.game.debug=!this.game.debug)})),window.addEventListener("keyup",(e=>{const t=this.game.keys.indexOf(e.key);t>-1&&this.game.keys.splice(t,1)}))}}class s{updateSprite(){this.frameX<this.maxFrame?this.frameX++:this.frameX=0}drawSprite(){this.game.ctx.drawImage(this.image,this.frameX*this.width,this.frameY*this.height,this.width,this.height,this.x,this.y,this.width,this.height),this.game.debug&&this.game.ctx.strokeRect(this.x,this.y,this.width,this.height)}}class h extends s{markedForDelete=!1;frameX=0;constructor(e){super(),this.game=e,this.x=e.width,this.speedX=-1.5*Math.random()-.5}update(){this.x+=this.speedX-this.game.speed,this.x+this.width<0&&(this.markedForDelete=!0),this.updateSprite()}draw(){this.drawSprite(),this.game.debug&&(this.game.ctx.fillStyle="black",this.game.ctx.font="20px Helvetica",this.game.ctx.fillText(this.lives.toString(),this.x,this.y))}}class a extends h{width=228;height=169;score=2;lives=2;image=document.getElementById("angler1");frameY=Math.floor(3*Math.random());maxFrame=37;type="angler1";constructor(e){super(e),this.y=Math.random()*(.9*e.height-this.height)}}class r extends h{width=213;height=165;score=3;lives=3;image=document.getElementById("angler2");frameY=Math.floor(2*Math.random());maxFrame=37;type="angler2";constructor(e){super(e),this.y=Math.random()*(.9*e.height-this.height)}}class m extends h{width=115;height=95;score=3;lives=3;image=document.getElementById("drone");frameY=Math.floor(2*Math.random());maxFrame=39;type="drone";constructor(e){super(e),this.y=Math.random()*(.9*e.height-this.height)}}class o extends h{width=99;height=95;score=3;lives=3;image=document.getElementById("lucky");frameY=Math.floor(2*Math.random());maxFrame=37;type="lucky";constructor(e){super(e),this.y=Math.random()*(.9*e.height-this.height)}}class d{width=10;height=3;speed=3;markForDelete=!1;image=document.getElementById("bullet");constructor(e,t,i){this.game=e,this.x=t,this.y=i}update(){this.x+=this.speed,this.width>.8*this.game.width&&(this.markForDelete=!0)}draw(){this.game.ctx.drawImage(this.image,this.x,this.y)}}class n extends s{width=120;height=190;x=20;y=100;frameX=0;frameY=0;maxFrame=37;speedY=0;maxSpeed=3;bullets=[];image=document.getElementById("player");powerUp=!1;powerUpTimer=0;powerUpLimit=5e3;constructor(e){super(),this.game=e}update(e){this.game.keys.includes("ArrowUp")?this.speedY=-this.maxSpeed:this.game.keys.includes("ArrowDown")?this.speedY=this.maxSpeed:this.speedY=0,this.y+=this.speedY;const t=this.game.height-.5*this.height,i=.5*-this.height;this.y>t?this.y=t:this.y<i&&(this.y=i),this.bullets.forEach((e=>e.update())),this.bullets=this.bullets.filter((e=>!e.markForDelete)),this.updateSprite(),this.powerUp&&(this.powerUpTimer>this.powerUpLimit?(this.powerUpTimer=0,this.powerUp=!1,this.frameX=0):(this.powerUpTimer+=e,this.frameY=1,this.game.ammo+=.1))}draw(){this.bullets.forEach((e=>e.draw())),this.drawSprite()}shoot(){this.game.ammo>0&&(this.bullets.push(new d(this.game,this.x+90,this.y+33)),this.game.ammo--),this.powerUp&&this.bottomShoot()}bottomShoot(){this.game.ammo>0&&(this.bullets.push(new d(this.game,this.x+90,this.y+175)),this.game.ammo--)}enterPowerUp(){this.powerUp=!0,this.powerUpTimer=0}}class l{fontSize=25;fontFamily="Bangers";color="yellow";constructor(e){this.game=e}draw(){const e=this.game.ctx;e.save(),e.font=this.fontSize+"px "+this.fontFamily,e.fillStyle="white",e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowColor="black",e.fillText("Score: "+this.game.score,20,40),e.fillStyle=this.game.player.powerUp?this.color:"white";for(let t=0;t<this.game.ammo;t++)e.fillRect(20+5*t,50,3,20);e.fillStyle="white";const t=(.001*this.game.gameTime).toFixed(1);if(e.fillText("Timer: "+t,20,100),this.game.gameOver){e.textAlign="center";let t="You Lost!",i="Try Again Next Time!";this.game.winningScore<this.game.score&&(t="You Win!",i="Well Done!"),e.fillStyle="white",e.font="50px "+this.fontFamily,e.fillText(t,.5*this.game.width,.5*this.game.height-30),e.font="25px "+this.fontFamily,e.fillText(i,.5*this.game.width,.5*this.game.height+30)}e.restore()}}const g=new class{width=1024;height=500;score=0;keys=[];enemies=[];debug=!1;gameTime=0;timeLimit=5e6;speed=1;ammo=20;maxAmmo=50;ammoTimer=0;ammoInterval=500;enemyInterval=1e3;enemyTimer=0;winningScore=20;gameOver=!1;constructor(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.player=new n(this),this.control=new i(this),this.ui=new l(this),this.background=new t(this)}update(e){this.gameOver||(this.gameTime+=e),this.gameTime>this.timeLimit&&(this.gameOver=!0),this.ctx.fillStyle="#4d79bc",this.ctx.fillRect(0,0,this.width,this.height),this.background.update(),this.player.update(e),this.ammoTimer>this.ammoInterval?(this.ammo<this.maxAmmo&&this.ammo++,this.ammoTimer=0):this.ammoTimer+=e,this.enemies.forEach((e=>{e.update(),this.checkCollistions(this.player,e)&&(e.markedForDelete=!0,"lucky"===e.type?this.player.enterPowerUp():this.score--),this.player.bullets.forEach((t=>{this.checkCollistions(t,e)&&(e.lives--,e.lives<=0&&(e.markedForDelete=!0,this.gameOver||(this.score+=e.score),this.winningScore<this.score&&(this.gameOver=!0)),t.markForDelete=!0)}))})),this.enemies=this.enemies.filter((e=>!e.markedForDelete)),this.enemyTimer>this.enemyInterval&&!this.gameOver?(this.addEnemy(),this.enemyTimer=0):this.enemyTimer+=e,this.background.postUpdate()}draw(){this.background.draw(),this.player.draw(),this.enemies.forEach((e=>e.draw())),this.ui.draw(),this.background.postDraw()}addEnemy(){const e=[o,a,r,m],t=e[Math.floor(Math.random()*(e.length-1))];this.enemies.push(new t(this))}checkCollistions(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}};let c=0;!function e(t){const i=t-c;c=t,g.update(i),g.draw(),requestAnimationFrame(e)}(0);
//# sourceMappingURL=index.74886a3a.js.map
